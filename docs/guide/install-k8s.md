---
description: PangeeCluster ä½¿ç”¨å›¾å½¢ç•Œé¢ç¦»çº¿å®‰è£… Kubernetes é«˜å¯ç”¨é›†ç¾¤
sidebarDepth: 1
meta:
  - name: keywords
    content: Kuberneteså®‰è£…,K8Så®‰è£…,kubeadm,Kubernetes å®‰è£…,K8S å®‰è£…,k8sæ­å»º
---

# ç¦»çº¿å®‰è£… K8S

## Pangee-Cluster

Pangee-Cluster æ˜¯ä¸€æ¬¾å¯ä»¥åœ¨å›¾å½¢ç•Œé¢å¼•å¯¼ä¸‹å®Œæˆ Kubernetes é«˜å¯ç”¨é›†ç¾¤ç¦»çº¿å®‰è£…çš„å·¥å…·ï¼Œå¼€æºä»“åº“çš„åœ°å€ä¸º [Pangee-Cluster](https://github.com/opencmit/pangee-cluster)

**å‚è€ƒæœ¬æ–‡æ¡£å®Œæˆå®‰è£…åçš„é›†ç¾¤ç‰ˆæœ¬ä¸º**

- Kubernetes v1.28.15 ï¼ˆä¸æ‚¨ä½¿ç”¨çš„ [èµ„æºåŒ…ç‰ˆæœ¬](https://github.com/opencmit/pangee-cluster-resource-package/) æœ‰å…³ï¼‰

### é…ç½®è¦æ±‚

å¯¹äº Kubernetes åˆå­¦è€…ï¼Œåœ¨æ­å»º K8S é›†ç¾¤æ—¶ï¼Œæ¨èä½¿ç”¨å¦‚ä¸‹æœåŠ¡å™¨é…ç½®ï¼š

- è‡³å°‘ 2 å° **2 æ ¸ 4G** çš„æœåŠ¡å™¨
- æ”¯æŒçš„ CPU æ¶æ„ `arm64` / `amd64`

**æ“ä½œç³»ç»Ÿå…¼å®¹æ€§**

æ“ä½œç³»ç»Ÿçš„å…¼å®¹æ€§å–å†³äº [èµ„æºåŒ…](https://github.com/opencmit/pangee-cluster-resource-package/)ï¼Œæœ€æ–°èµ„æºåŒ…æ”¯æŒçš„æ“ä½œç³»ç»Ÿæœ‰ï¼š openEulerã€Anolisã€Kylin Linux Advanced Serverã€Ubuntuã€CentOS ç­‰ã€‚

| æ“ä½œç³»ç»Ÿç‰ˆæœ¬  | æœ¬æ–‡æ¡£æ˜¯å¦å…¼å®¹                           | å¤‡æ³¨   |
| ------------ | ---------------------------------------- | ------ |
| openEuler 20.03   | <span style="font-size: 24px;">ğŸ˜„</span> | å·²éªŒè¯ |
| openEuler 22.03   | <span style="font-size: 24px;">ğŸ˜„</span> | å·²éªŒè¯ |
| Ubuntu 20.04 | <span style="font-size: 24px;">ğŸ˜„</span> | å·²éªŒè¯ |
| Ubuntu 24.04 | <span style="font-size: 24px;">ğŸ˜„</span> | å·²éªŒè¯ |

## å®‰è£… Pangee-Cluster

è¯·å‚è€ƒæ–‡æ¡£ [å¿«é€Ÿå®‰è£… PangeeCluster](/index.html)

## åŠ è½½ç¦»çº¿èµ„æºåŒ…

- åœ¨ Pangee-Cluster ç•Œé¢ä¸­ï¼Œå¯¼èˆªåˆ° `ç³»ç»Ÿè®¾ç½®` --> `èµ„æºåŒ…ç®¡ç†` ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»ç­‰å€™æ‚¨å¤šæ—¶çš„ `Pangee-Cluster ç¦»çº¿èµ„æºåŒ…`ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

  ![åŠ è½½ Pangee-Cluster èµ„æºåŒ…](./install-k8s.assets/pangee-cluster-resource-01.png)

- ç‚¹å‡» `å¯¼ å…¥` æŒ‰é’®ï¼Œåœ¨ç•Œé¢çš„å¼•å¯¼ä¸‹å®Œæˆèµ„æºåŒ…çš„åŠ è½½ã€‚

  ::: tip é‡è¦

  - æƒé™é—®é¢˜
    - å¯¼å…¥èµ„æºåŒ…æ—¶ï¼Œå¯èƒ½ä¼šç¢°åˆ° `no such file or directory` æˆ–è€… `permission denied` ä¹‹ç±»çš„é”™è¯¯æç¤ºï¼Œé€šå¸¸æ˜¯å› ä¸ºæ‚¨å¼€å¯äº† SELinuxï¼Œå¯¼è‡´ pangee-cluster ä¸èƒ½è¯»å–æ˜ å°„åˆ°å®¹å™¨ `/data` çš„è·¯å¾„
  - ç¦»çº¿å¯¼å…¥
    - å¦‚æœæ‚¨å¤„åœ¨å†…ç½‘ç¯å¢ƒï¼Œä¸Šå›¾ä¸­çš„åˆ—è¡¨é»˜è®¤å°†æ˜¯ç©ºçš„ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤å¯¼å…¥èµ„æºåŒ…ï¼š
      - ä» [Pangee-Cluster-Resource-Package](https://github.com/opencmit/pangee-cluster-resource-package/releases) ä¸‹è½½æ‚¨éœ€è¦çš„èµ„æºåŒ…ï¼Œä¾‹å¦‚ `k8s_1.28.15_v1` çš„ [Source code(zip)](https://github.com/opencmit/pangee-cluster-resource-package/archive/refs/tags/k8s_1.28.15_v1.zip)
      - åœ¨ Pangee-Cluster ç•Œé¢ä¸­ï¼Œå¯¼èˆªåˆ° `ç³»ç»Ÿè®¾ç½®` --> `èµ„æºåŒ…ç®¡ç†` ç•Œé¢ï¼Œç‚¹å‡»ç•Œé¢ä¸­çš„ `ä¸Šä¼ è‡ªå®šä¹‰èµ„æºåŒ…` æŒ‰é’®ï¼ŒæŒ‰ç…§ç•Œé¢çš„å¼•å¯¼å®Œæˆèµ„æºåŒ…çš„å¯¼å…¥ã€‚

  :::

- ç¡®è®¤èµ„æºåŒ…å¯¼å…¥æˆåŠŸåï¼Œæ‚¨å¯ä»¥åœ¨ `èµ„æºåŒ…ç®¡ç†` ç•Œé¢ä¸­çœ‹åˆ°å¯¼å…¥çš„èµ„æºåŒ…ï¼Œç„¶åå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

  åœ¨è¯¥ç•Œé¢ç‚¹å‡» `ä¸‹è½½` æŒ‰é’®ï¼Œå¹¶è¾“å…¥æœ‰æ•ˆçš„ http ä»£ç†æœåŠ¡å™¨åœ°å€ï¼ˆ pangee-cluster æœåŠ¡å™¨å°†ä½¿ç”¨è¯¥ä»£ç†ä» [github.com](https://github.com/opencmit/pangee-cluster-resource-package/releases) ä¸‹è½½è¯¥ç‰ˆæœ¬çš„èµ„æºåŒ…åˆ° `/data` ç›®å½•ä¸‹ï¼‰ï¼Œä¾‹å¦‚ `http://127.0.0.1:7890`ï¼Œç„¶åç‚¹å‡» `ä¸‹è½½` æŒ‰é’®ã€‚

  ![ç¡®è®¤èµ„æºåŒ…å¯¼å…¥æˆåŠŸ](./install-k8s.assets/pangee-cluster-resource-02.png)

- ç¡®è®¤èµ„æºåŒ…ä¸‹è½½æˆåŠŸåï¼Œå°†æ˜¾ç¤ºå¦‚ä¸‹ç•Œé¢ï¼š

  åœ¨è¯¥ç•Œé¢ç‚¹å‡» `åŠ è½½èµ„æºåŒ… k8s_1.28.15_v1` æŒ‰é’®ï¼Œé€‰æ‹©éœ€è¦çš„ CPU æ¶æ„ï¼Œå¹¶è¾“å…¥ä»£ç†æœåŠ¡å™¨åœ°å€ï¼ˆ pangee-cluster æœåŠ¡å™¨å°†ä½¿ç”¨è¯¥ä»£ç†ä» github.com / download.docker.com / registry.k8s.io / hub.docker.com / dl.k8s.io ç­‰åœ°å€ä¸‹è½½äºŒè¿›åˆ¶å®‰è£…ç¨‹åºæˆ–è€…å®¹å™¨é•œåƒï¼‰

  ![ç¡®è®¤èµ„æºåŒ…ä¸‹è½½æˆåŠŸ](./install-k8s.assets/pangee-cluster-resource-03.png)

- ä¸Šè¿°æŒ‡ä»¤è¿è¡Œå®Œæˆåï¼Œpangee-cluster è‡³æ­¤å®Œæˆäº†å¯¹ k8s_1.28.15_v1 èµ„æºåŒ…çš„åŠ è½½ã€‚

## è§„åˆ’å¹¶å®‰è£…é›†ç¾¤

- åœ¨ Pangee-Cluster ç•Œé¢ä¸­ï¼Œå¯¼èˆªåˆ° `é›†ç¾¤ç®¡ç†` ç•Œé¢ï¼Œç‚¹å‡»ç•Œé¢ä¸­çš„ `æ·»åŠ é›†ç¾¤å®‰è£…è®¡åˆ’` æŒ‰é’®ï¼Œå¡«å†™è¡¨å•å¦‚ä¸‹ï¼š

  - é›†ç¾¤åç§°ï¼š è‡ªå®šä¹‰åç§°ï¼Œæœ¬æ–‡ä¸­å¡«å†™ä¸º `test`ï¼Œæ­¤åç§°ä¿å­˜åä¸å¯ä»¥ä¿®æ”¹ï¼›
  - èµ„æºåŒ…ï¼šé€‰æ‹©å‰é¢æ­¥éª¤ä¸­å¯¼å…¥çš„ç¦»çº¿èµ„æºåŒ…ã€‚

  ![åˆ›å»ºé›†ç¾¤å®‰è£…è®¡åˆ’](./install-k8s.assets/pangee-cluster-01.png)

- ç‚¹å‡»ä¸Šå›¾å¯¹è¯æ¡†ä¸­çš„ `ç¡®å®š` æŒ‰é’®åï¼Œå°†è¿›å…¥é›†ç¾¤è§„åˆ’é¡µé¢ï¼Œåœ¨è¯¥ç•Œé¢ä¸­åˆ‡æ¢åˆ° `å‚æ•°é…ç½®` æ ‡ç­¾é¡µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

  å¡«å†™ `kube_api_server_vip` å­—æ®µï¼Œè¯¥ IP åœ°å€åº”è¯¥ä¸é›†ç¾¤ä¸­çš„èŠ‚ç‚¹åœ¨ç›¸åŒç½‘æ®µï¼Œå¹¶ä¸”ä¸è¢«ä»»ä½•èŠ‚ç‚¹å ç”¨ï¼Œæœ¬æ–‡ä¸­å¡«å†™ä¸º `10.99.22.10`ã€‚

  ![å‚æ•°é…ç½®](./install-k8s.assets/pangee-cluster-02.png)

æ·»åŠ æ‚¨æ¯ä¸ªé›†ç¾¤èŠ‚ç‚¹çš„è¿æ¥å‚æ•°å¹¶è®¾ç½®èŠ‚ç‚¹çš„è§’è‰²ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

  é‡è¦ï¼š pangee-cluster æ‰€åœ¨æœºå™¨ä¸èƒ½å½“åš K8S é›†ç¾¤çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå› ä¸ºå®‰è£…è¿‡ç¨‹ä¸­ä¼šé‡å¯é›†ç¾¤èŠ‚ç‚¹çš„å®¹å™¨å¼•æ“ï¼Œè¿™ä¼šå¯¼è‡´ pangee-cluster è¢«é‡å¯æ‰ã€‚

  ![é›†ç¾¤è§„åˆ’](./install-k8s.assets/pangee-cluster-03.png)

  ::: tip æ³¨æ„äº‹é¡¹

  - æœ€å°‘çš„èŠ‚ç‚¹æ•°é‡æ˜¯ 1 ä¸ªï¼›
  - ETCD èŠ‚ç‚¹çš„æ€»æ•°é‡å¿…é¡»ä¸ºå¥‡æ•°ï¼›
  - åœ¨ `é»˜è®¤ SSH å‚æ•°` æ ‡ç­¾é¡µï¼Œå¯ä»¥è®¾ç½®èŠ‚ç‚¹çš„é€šç”¨è¿æ¥å‚æ•°ï¼Œä¾‹å¦‚æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½ä½¿ç”¨ç›¸åŒçš„ ssh ç«¯å£ã€ç”¨æˆ·åã€å¯†ç ï¼Œåˆ™å…±åŒçš„å‚æ•°åªåœ¨æ­¤å¤„è®¾ç½®å³å¯ï¼›
  - å¦‚æœæ‚¨ PangeeCluster æ‰€åœ¨èŠ‚ç‚¹ä¸èƒ½ç›´æ¥è®¿é—®åˆ° Kubernetes é›†ç¾¤çš„èŠ‚ç‚¹ï¼Œæ‚¨å¯ä»¥è®¾ç½®è·³æ¿æœºå‚æ•°ï¼Œä½¿ PangeeCluster å¯ä»¥é€šè¿‡ ssh è®¿é—®é›†ç¾¤èŠ‚ç‚¹ã€‚

  :::

- ç‚¹å‡»ä¸Šå›¾çš„ `ä¿å­˜` æŒ‰é’®ï¼Œåˆ‡æ¢åˆ° `æ“ä½œé›†ç¾¤` æ ‡ç­¾é¡µï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ `å®‰è£…é›†ç¾¤` çš„äº”ä¸ªæ­¥éª¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

  ![é›†ç¾¤å®‰è£…](./install-k8s.assets/pangee-cluster-04.png)

- æ¯ä¸ªä»»åŠ¡æ‰§è¡ŒæˆåŠŸåçš„ç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

  ![é›†ç¾¤æ—¥å¿—](./install-k8s.assets/pangee-cluster-05.png)

## è®¿é—®é›†ç¾¤

:tada: :tada: :tada:

- æ­¤æ—¶æ‚¨å·²ç»å®Œæˆäº†é›†ç¾¤çš„å®‰è£…ï¼Œå¯åˆ‡æ¢åˆ° `è®¿é—®é›†ç¾¤` æ ‡ç­¾é¡µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

  ç•Œé¢ç»™å‡ºäº†ä¸‰ç§æ–¹å¼å¯ä»¥è®¿é—® kubernetes é›†ç¾¤ï¼š
  <div style="font-size: 13px;margin-left: 40px;">

  - åœ¨é›†ç¾¤ä¸»èŠ‚ç‚¹ä¸Šæ‰§è¡Œ kubectl å‘½ä»¤
  - è·å–é›†ç¾¤çš„ .kubeconfig æ–‡ä»¶
  - è®¿é—®é›†ç¾¤çš„ etcd æœåŠ¡

  </div>

  ![è®¿é—®é›†ç¾¤](./install-k8s.assets/pangee-cluster-06.png)

